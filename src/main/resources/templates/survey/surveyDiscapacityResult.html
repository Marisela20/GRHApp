<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Resultados de la Encuesta - Inclusión Laboral</title>
    <link th:href="@{/fontawesome-free/css/all.min.css}" rel="stylesheet">
    <link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">
    <link th:href="@{/css/mycss.css}" rel="stylesheet">
    <script th:src="@{/jquery/jquery.min.js}"></script>
    <script th:src="@{/bootstrap/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/js/sb-admin-2.min.js}"></script>
</head>
<body id="page-top">
<div id="wrapper">
    <div th:replace="fragments/navbar :: navbar"></div>

    <div id="content-wrapper" class="d-flex flex-column">
        <div th:replace="fragments/topBar :: topBar"></div>

        <div id="content">
            <div class="container-fluid">
                <h1 class="h3 mb-4 text-gray-800">Resultados de la Encuesta - Inclusión Laboral</h1>

                <div class="card shadow mb-4">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered" width="100%" cellspacing="0">
                                <thead class="thead-light">
                                <tr>
                                    <th>#</th>
                                    <th>Pregunta</th>
                                    <th>Respuesta</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="qa, iterStat : ${questionWithAnswers}">
                                    <td th:text="${iterStat.index + 1}"></td>
                                    <td th:text="${qa.questionText}"></td>
                                    <td th:text="${qa.answerText}"></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Botones: ADMIN vs USER -->
                        <div class="mt-4 d-flex justify-content-between">
                            <!-- Solo ADMIN: volver a la lista -->
                            <a th:href="@{'/survey/discapacity/surveyList'}"
                               class="btn btn-secondary"
                               sec:authorize="hasRole('ADMIN')">
                                ← Volver a la Lista
                            </a>

                            <!-- Usuarios comunes: volver al dashboard -->
                            <a th:href="@{'/dashboard'}"
                               class="btn btn-secondary"
                               sec:authorize="!hasRole('ADMIN')">
                                ← Volver al Dashboard
                            </a>

                            <a th:href="@{'/survey/export/pdf/' + ${surveyId}}" class="btn btn-danger">
                                <i class="fas fa-file-pdf"></i> Exportar en PDF
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div th:replace="fragments/footer :: footer"></div>
    </div>
</div>
</body>
</html>
